layout: post
title:  Defold release 1.3.5
excerpt: Defold 1.3.5 has been released.
author: Björn Ritzl
tags: ["release notes"]


## Engine
__NEW__: ([#5265](https://github.com/defold/defold/issues/5265)) __Added option to instantly clear spawned particles when stopping particlefx__ 
When `particlefx.stop()` is called all emitters immediately stop spawning new particles but already spawned particles will continue to live until they reach their end of life. Clearing/removing already spawned particles is only possible by either unloading the collection the particles belong to or by setting the tint alpha in the particlefx material to 0.0. 

To give developers a better alternative to clearing spawned particles It is now possible to specify this when the particle effect is stopped:

```
particlefx.stop(url, { clear = true })
gui.stop_particlefx(node, { clear = true })
```


__NEW__: ([#3232](https://github.com/defold/defold/issues/3232)) __New properties for nodes : `enabled` and `visible`__ 
New properties for GUI nodes: `enabled` and `visible`.

`enabled` is a property that toggles a node tree. This value was available in the runtime using `gui.is_enabled()` and `gui.set_enabled()` and now it's avaliable from the editor as well.

`visible` is a property that toggles rendering for a node. This option may be useful when a node should be used for anchoring or as a click zone, but shouldn't affect rendering at all. New methods added for work with the property: `gui.get_visible()` and `gui.set_visible()`.


__NEW__: ([#6628](https://github.com/defold/defold/issues/6628)) __Add support for drawing to multiple render targets__ 
Many graphical effects (e.g Many-light pipelines / deferred rendering, ssao, temporal antialiasing) operate on several components of a frame such as position, normals and albedo color. These are usually generated by drawing the scene once into several render targets that can be used in other parts of the rendering pipeline. 

MRT is available from OpenGL 3 / ES3 / WebGL2 (and baseline vulkan) and support is now available in the Defold render.* API when creating a new render target:

```
function init(self)
    -- render target buffer parameters
    local color_params_rgba = { format = render.FORMAT_RGBA,
                                width = render.get_window_width(),
                                height = render.get_window_height(),
                                min_filter = render.FILTER_LINEAR,
                                mag_filter = render.FILTER_LINEAR,
                                u_wrap = render.WRAP_CLAMP_TO_EDGE,
                                v_wrap = render.WRAP_CLAMP_TO_EDGE }
    local color_params_float = { format = render.FORMAT_RG32F,
                           width = render.get_window_width(),
                           height = render.get_window_height(),
                           min_filter = render.FILTER_LINEAR,
                           mag_filter = render.FILTER_LINEAR,
                           u_wrap = render.WRAP_CLAMP_TO_EDGE,
                           v_wrap = render.WRAP_CLAMP_TO_EDGE }

    -- Create a render target with three color attachments
    -- Note: No depth buffer is attached here
    self.my_render_target = render.render_target({
           [render.BUFFER_COLOR0_BIT] = color_params_rgba,
           [render.BUFFER_COLOR1_BIT] = color_params_rgba,
           [render.BUFFER_COLOR2_BIT] = color_params_float, })
end

function update(self, dt)
    -- enable target so all drawing is done to it
    render.enable_render_target(self.my_render_target)
    -- draw a predicate to the render target
    render.draw(self.my_pred)
end
```


__NEW__: ([#6488](https://github.com/defold/defold/issues/6488)) __Sign iOS app extensions while preserving entitlements__ 
An App Extension lets you extend custom functionality and content beyond your app and make it available to users while they’re interacting with other apps or the system. Examples are app specific stickers in iMessage or extensions to the sharing dialog.

App Extensions must be included in the PlugIns folder and they must be signed. It is easy to include extensions in a `PlugIns` folder by adding the `PlugIns` folder as a [bundle resource](https://defold.com/manuals/project-settings/#bundle-resources) to be included in the application bundle.

This change automatically signs any files in `PlugIns` with the `.appex` file extension when the application is bundled while at the same time preserving the app extension entitlements.


__FIX__: ([#6767](https://github.com/defold/defold/pull/6767)) __Updated to LZ4 1.9.4 (63df16d)__ 
Updated internal LZ4 compression to 1.9.4. The update LZ4 implementation results in faster decompression compare to old versions.


__FIX__: ([#5454](https://github.com/defold/defold/issues/5454)) __Migrate build system to python3__ 
The Defold build system has been migrated from Python 2 to Python 3.


__FIX__: ([#6757](https://github.com/defold/defold/pull/6757)) __Added collectionproxy.get_resources()__ 
Returns a list of all the resources that the collection proxy is dependent on:

```
   local resources = collectionproxy.get_resources(proxy_url)
   for _, v in ipairs(resources) do
       print("Resource: " .. v)
    end
```

This functionality will later be used for removing old live update content from disk.


__FIX__: ([#6766](https://github.com/defold/defold/issues/6766)) __Make sure `game.arcd` isn't compressed in `apk`/`aab`__ 
Keep the main resource archive `game.arcd` in the Android bundle uncompressed to prevent unnecessary memory allocations in runtime.


__FIX__: ([#6742](https://github.com/defold/defold/issues/6742)) __Exclude unnecessary information from html build report.__ 
Exclude `game.project` information and build options related to authorisation from the generated build report.



__FIX__: [#6788](https://github.com/defold/defold/issues/6788) __GUI text doesn't render if render script has previously early-outed__
This fixes an issue with text not always rendering when skipping a frame, for instance during an early out in the render script.



__FIX__: [#6816](https://github.com/defold/defold/issues/6816) **Fix issue when engine can't play more than 32 sounds simultaneously**
Use `sound.max_sound_instances` as maximum count of simultaneously played sounds.


## Editor
__NEW__: ([#6269](https://github.com/defold/defold/issues/6269)) __Read authentication token for dependencies from system environment__ 
When using project dependencies hosted in private repositories on GitHub or behind basic authentication on a private server the authentication token has to be part of the userinfo portion of the URL:

```
https://user:password@github.com/defold/defold/archive/refs/heads/dev.zip
```

This is not recommended as it may result in developers accidentally leaking their access token when sharing a list of their dependencies in a support ticket or in the Defold forum.

To avoid this it is now also possible to store the authentication token in a system environment variable and let Defold read this when resolving dependencies. Defold will inspect the dependency URLs and replace any userinfo password field starting and ending with `__` (two underscore characters) with the value from the system variable specified by the string enclosed within the `__` prefix and suffix:

```
https://user:__MY_GITHUB_TOKEN__@github.com/defold/defold/archive/refs/heads/dev.zip
```

In the above URL the `__MY_GITHUB_TOKEN__` will be replaced by the value of the system variable `MY_GITHUB_TOKEN`.


__FIX__: ([#6666](https://github.com/defold/defold/issues/6666)) __Ignore empty lines in .defignore__ 



__FIX__: ([#6400](https://github.com/defold/defold/issues/6400)) __Report defignored files as non-existent__ 
Additionally, this changeset makes the editor sync resources after save if `.defignore` file was modified.



__FIX__: ([#6753](https://github.com/defold/defold/pull/6753)) __Improve editor behavior with legacy Spine projects__ 
* Prevent legacy Spine projects from corrupting Gui scenes with Spine data unless `extension-spine` has been added as a dependency.
* Improve error message if a Collection, Game Object, or Gui contains embedded data that is not understood by the editor. The message now includes a common-cause solution (e.g. "Could the project be missing a required extension?").



__FIX__: ([#6732](https://github.com/defold/defold/pull/6732)) __[DEFEDIT] Safeguard against IOExceptions when generating convex hulls__ 
* `IOExceptions` were not being caught correctly for image reads associated with `.atlas` and `.tilesource` files.
* Removed unnecessary image reads when Sprite Trimming is disabled.



__CHANGE__: [(#6760)]( https://github.com/defold/defold/pull/6732) Redesign game.project form #6760
This changeset alters the UI of forms that requested navigation (currently only game.project form) in a following way:

* the form shows sections UI organized in groups;
* the form shows at most one section at a time.

